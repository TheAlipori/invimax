---
import "@fontsource/gloock";
import FlowerIcon from "../assets/FlowerIcon.astro";
import Card from "./Card.astro";
const { fecha_evento } = Astro.props;
---

<!-- src/components/SpecialMessage.astro -->
<section class="font-gloock">
  <!-- Estrellas animadas -->

  <div
    class="relative z-10 py-16 px-6 bg-white flex flex-col items-center justify-center"
  >
    <!-- LÃ­nea decorativa -->
    <div
      class="absolute top-10 w-24 h-1 bg-black/20"
      data-aos="fade-right"
      data-aos-delay="200"
    >
    </div>

    <div class="max-w-4xl text-center space-y-12">
      <!-- Primer texto -->
      <p
        class="text-4xl md:text-5xl font-gloock text-gray-800 leading-snug"
        data-aos="fade-up"
        data-aos-delay="300"
      >
        AcompÃ¡Ã±anos a celebrar<br />
        <span
          class="text-3xl md:text-4xl font-normal font-playfair italic text-black"
        >
          el dÃ­a en que unimos nuestras vidas
        </span>
      </p>

      <!-- Separador -->
      <div
        class="mx-auto w-16 border-t-2 border-rose-300/40"
        data-aos="zoom-in"
        data-aos-delay="400"
      >
      </div>

      <!-- Segundo texto -->
      <p
        class="text-3xl md:text-4xl font-gloock text-gray-800 leading-snug"
        data-aos="fade-up"
        data-aos-delay="500"
      >
        SerÃ¡ una fecha<br />
        <span
          class="text-2xl md:text-3xl font-normal font-montserrat uppercase tracking-widest text-amber-700"
        >
          inolvidable
        </span>
      </p>
    </div>

    <!-- SVG izquierdo simplificado -->

    <!--  Columna de 3 imagenes -->
    <div class="grid grid-cols-3 gap-4 max-w-4xl mx-auto mt-10">
      <!-- Columna 1 - DÃ­a -->
      <div
        class="flex flex-col items-center mt-0"
        data-aos="fade-up"
        data-aos-delay="200"
      >
        <div class="text-8xl font-bold mb-2">26</div>
        <p class="text-xl font-semibold text-gray-600 mb-4">DÃ­a</p>
        <img
          src="/hero1.png"
          alt="Imagen 1"
          class="w-full h-auto rounded-lg shadow-md object-cover hover:scale-105 transition-transform duration-300"
          data-aos="zoom-in"
          data-aos-delay="400"
        />
      </div>

      <!-- Columna 2 - Mes -->
      <div
        class="flex flex-col items-center mt-10"
        data-aos="fade-down"
        data-aos-delay="300"
      >
        <div class="text-8xl font-bold mb-2">01</div>
        <p class="text-xl font-semibold text-gray-600 mb-4">Mes</p>
        <img
          src="/hero1.png"
          alt="Imagen 2"
          class="w-full h-auto rounded-lg shadow-md object-cover hover:scale-105 transition-transform duration-300"
          data-aos="zoom-in"
          data-aos-delay="500"
        />
      </div>

      <!-- Columna 3 - Hora -->
      <div
        class="flex flex-col items-center mt-20"
        data-aos="fade-up"
        data-aos-delay="400"
      >
        <div class="text-8xl font-bold mb-2">25</div>
        <p class="text-xl font-semibold text-gray-600 mb-4">AÃ±o</p>
        <img
          src="/hero1.png"
          alt="Imagen 3"
          class="w-full h-auto rounded-lg shadow-md object-cover hover:scale-105 transition-transform duration-300"
          data-aos="zoom-in"
          data-aos-delay="600"
        />
      </div>
    </div>

    <style>
      .animate-pulse-slow {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.8;
        }
      }
    </style>
    <!-- Contador -->
    <div class="py-12 text-center" data-aos="fade-in" data-aos-duration="1000">
      <h2
        class="font-gloock text-5xl mb-12"
        data-aos="fade-down"
        data-aos-delay="200"
      >
        Faltan
      </h2>

      <div class="flex justify-center gap-8 flex-wrap">
        <!-- DÃ­as -->
        <div
          class="bg-white p-6 rounded-xl border-2 border-black shadow-md hover:shadow-lg transition-transform hover:scale-105"
          data-aos="flip-left"
          data-aos-delay="300"
        >
          <div
            class="text-7xl font-bold mb-2 text-black animate-count"
            id="dias"
          >
            0
          </div>
          <div class="text-xl uppercase tracking-wide text-black">DÃ­as</div>
        </div>

        <!-- Separador -->
        <div
          class="self-center text-4xl text-gray-400 hidden md:block animate-bounce-horizontal"
          data-aos="fade-in"
          data-aos-delay="400"
        >
          :
        </div>

        <!-- Horas -->
        <div
          class="bg-white p-6 rounded-xl border-2 border-black shadow-md hover:shadow-lg transition-transform hover:scale-105"
          data-aos="flip-up"
          data-aos-delay="350"
        >
          <div
            class="text-7xl font-bold mb-2 text-black animate-count"
            id="horas"
          >
            0
          </div>
          <div class="text-xl uppercase tracking-wide text-black">Horas</div>
        </div>

        <!-- Separador -->
        <div
          class="self-center text-4xl text-gray-400 hidden md:block animate-bounce-horizontal"
          data-aos="fade-in"
          data-aos-delay="450"
        >
          :
        </div>

        <!-- Minutos -->
        <div
          class="bg-white p-6 rounded-xl border-2 border-black shadow-md hover:shadow-lg transition-transform hover:scale-105"
          data-aos="flip-down"
          data-aos-delay="400"
        >
          <div
            class="text-7xl font-bold mb-2 text-black animate-count"
            id="minutos"
          >
            0
          </div>
          <div class="text-xl uppercase tracking-wide text-black">Minutos</div>
        </div>

        <!-- Separador -->
        <div
          class="self-center text-4xl text-gray-400 hidden md:block animate-bounce-horizontal"
          data-aos="fade-in"
          data-aos-delay="500"
        >
          :
        </div>

        <!-- Segundos -->
        <div
          class="bg-white p-6 rounded-xl border-2 border-black shadow-md hover:shadow-lg transition-transform hover:scale-105"
          data-aos="flip-right"
          data-aos-delay="450"
        >
          <div
            class="text-7xl font-bold mb-2 text-black animate-count"
            id="segundos"
          >
            0
          </div>
          <div class="text-xl uppercase tracking-wide text-black">Segundos</div>
        </div>
      </div>
    </div>

    <style>
      .animate-count {
        animation: countPop 0.5s ease-out;
      }

      @keyframes countPop {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .animate-pulse-slow {
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: translateY(0);
        }
        50% {
          opacity: 0.8;
          transform: translateY(-5px);
        }
      }

      .animate-bounce-horizontal {
        animation: bounceH 1.5s ease-in-out infinite;
      }

      @keyframes bounceH {
        0%,
        100% {
          transform: translateX(0);
        }
        50% {
          transform: translateX(5px);
        }
      }
    </style>
  </div>

  <script define:vars={{ fecha_evento }} client:load>
    function updateCountdown() {
      const targetDate = new Date(fecha_evento).getTime();
      const now = new Date().getTime();
      const distance = targetDate - now;

      if (distance < 0) {
        document.getElementById("countdown").innerHTML =
          "<div class='text-xl font-bold'>Â¡El evento ha comenzado! ðŸŽ‰</div>";
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor(
        (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
      );
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      document.getElementById("dias").innerText = days;
      document.getElementById("horas").innerText = hours
        .toString()
        .padStart(2, "0");
      document.getElementById("minutos").innerText = minutes
        .toString()
        .padStart(2, "0");
      document.getElementById("segundos").innerText = seconds
        .toString()
        .padStart(2, "0");
    }

    // Actualizar cada segundo
    setInterval(updateCountdown, 1000);
    // Ejecutar inmediatamente al cargar
    updateCountdown();
  </script>
</section>
