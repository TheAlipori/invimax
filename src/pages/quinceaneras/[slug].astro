---
import { getCollection, getEntryBySlug } from "astro:content";
import Hero from "../../components/quinceanera/floral/Hero.astro";
import Welcome from "../../components/quinceanera/floral/Welcome.astro";
import Layout from "../../layouts/Layout.astro";
import Date from "../../components/quinceanera/floral/Date.astro";
import Image1 from "../../components/quinceanera/floral/image1.astro";
import Itinerario from "../../components/quinceanera/floral/Itinerario.astro";
import Detalles from "../../components/quinceanera/floral/Detalles.astro";

export async function getStaticPaths() {
  const entries = await getCollection("quinceaneras");
  return entries.map((entry) => ({
    params: { slug: entry.slug },
  }));
}

const { slug } = Astro.params;
const entry = await getEntryBySlug("quinceaneras", slug);

if (!entry) {
  return new Response(null, {
    status: 404,
    statusText: "Quinceañera no encontrada",
  });
}

// Extrae TODAS las props necesarias
const {
  title,
  mensaje_principal,
  colorPrimario,
  imagenes,
  quinceanera,
  padres,
  fecha_evento,
  evento,
  itinerario,
  numerowp,
  quote,
  mensajes,
  iglesia,
  recepcion,
} = entry.data;

const { Content } = await entry.render();
---

<Layout>
  <Hero
    title={title}
    mensaje={mensaje_principal}
    quinceanera={quinceanera}
    padres={padres}
    imagen={imagenes.portada}
    colorPrimario={colorPrimario}
    fechaEvento={fecha_evento}
    evento={evento}
    itinerario={itinerario}
    numerowp={numerowp}
    quote={quote}
    mensajes={mensajes}
    iglesia={iglesia}
    recepcion={recepcion}
  />
  <Welcome />
  <Image1 />

  <Date fecha_evento={fecha_evento} />
  <Itinerario itinerario={itinerario} />
  <Detalles />

  <Content />
  <!-- Asegúrate de incluir esto para el markdown -->
</Layout>
